{% extends "base.html" %}

{% block content %}

<!--Body Page-->
{% if http_status != 200 %}
  <h4>Error: HTTP Error {{ http_status }}</h4>
{% endif %}
{% if timeout == True %}
  <h4>Error: Timeout</h4>
{% endif %}
{% if connection_error == True %}
  <h4>Error: Connection Error</h4>
{% endif %}


<br>
<table id ="new_orders_table" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col" onclick="sortTable(1, 'new_orders_table')">order_number <i class="fa fa-fw fa-sort"></th>
      <th scope="col">order_id</th>
      <th scope="col">Customer</th>
      <th scope="col">Product</th>
      <th scope="col">sku</th>
      <th scope="col">quantity</th>
      <th scope="col">line_item_id</th>
      <th scope="col">created_at</th>
      <th scope="col">fulfillment_status</th>
      <th scope="col">Detail</th>
    </tr>
  </thead>
  <tbody>
    {% if http_error == False and http_status == 200 %}
        {% for order in orders %}
            {% for item in order.line_items %}
              <tr>
                <th scope="row">{{ forloop.parentloop.counter }}</th>
                <td>{{ order.order_number }}</td>
                <td>{{ order.id }}</td>
                <td>{{ order.customer.first_name }} {{ order.customer.last_name }}</td>
                <td>{{ item.title }}</td>
                <td>{{ item.sku }}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ item.id }}</td>
                <td>{{ order.created_at }}</td>
                <td>{{ order.fulfillment_status }}</td>
                <td>
                  <button type="button" class="btn btn-sm btn-dark" title="Popover title" data-toggle="popover" data-content="And here's some amazing content. It's very engaging. Right?">View</button>
                </td>
              </tr>
            {% endfor %}

            {% empty %}
            <h4>No new orders.</h4>
        {% endfor %}
    {% endif %}

  </tbody>
</table>

{% endblock content %}
